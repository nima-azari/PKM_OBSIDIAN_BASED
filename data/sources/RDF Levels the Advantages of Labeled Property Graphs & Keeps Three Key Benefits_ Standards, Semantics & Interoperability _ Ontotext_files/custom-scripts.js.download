jQuery(document).ready(function($){$('.load-more-posts').on('click',function(e){e.preventDefault();var button=$(this);var page=button.data('page')||1;var postType=button.data('post_type')||'post';var khCatName=button.data('kh_cat_name')||'';var industryCatName=button.data('industry_cat_name')||'';var topicCatName=button.data('topic_cat_name')||'';var capabilityCatName=button.data('capability_cat_name')||'';var applicationAreaCatName=button.data('application_area_cat_name')||'';var relation=button.data('relation')||'AND';$.ajax({type:'POST',url:customFilterData.ajaxurl,dataType:'json',data:{action:'ontotext_load_more_posts',page:page,post_type:postType,kh_cat_name:khCatName,industry_cat_name:industryCatName,topic_cat_name:topicCatName,capability_cat_name:capabilityCatName,application_area_cat_name:applicationAreaCatName,relation:relation},success:function(response){if(response.html){button.parent().prevAll('.blog-grid:first').append($.parseHTML(response.html));button.data('page',page+1);if(page>=response.max_pages){button.remove()}}else{button.remove()}},error:function(xhr,status,error){console.error('AJAX Error:',error)}})});$(".site-header .main-header-menu .menu-item.menu-item-products > .sub-menu > li:first-child > .sub-menu > li").on("mouseover",function(){let totalHeight=0;$(this).prevAll().each(function(){totalHeight+=$(this).outerHeight(!0)});$(this).find(".sub-menu").css("top",-totalHeight);$(".has-active-state-default").removeClass("is-active");$(this).addClass("has-hover-state").siblings().removeClass('.has-hover-state')});$(".site-header .main-header-menu .menu-item.menu-item-products > .sub-menu > li:last-child").on("mouseover",function(){$(".has-active-state-default").addClass("is-active")});$(".site-header .ast-mega-menu-enabled > .menu-item-has-children .astra-megamenu").on("mouseleave",function(){$(".has-active-state-default").addClass("is-active")});$('li.has-active-state-default').each(function(){if($(this).siblings('.current-menu-item').length>0){$(this).removeClass('has-active-state-default');$(this).removeClass('is-active')}});$(".main-navigation > .main-header-menu > li.menu-item-has-children > a").on("click",function(e){e.preventDefault();$(this).parent().toggleClass("has-megamenu").siblings().removeClass("has-megamenu");$(".has-active-state-default").addClass("is-active");$('.site-header .ast-mega-menu-enabled .astra-megamenu-li .sub-menu .sub-menu > li.current-menu-item').each(function(){let totalHeight=0;$(this).prevAll().each(function(){totalHeight+=$(this).outerHeight(!0)});console.log($(this).prevAll())
$(this).find(".sub-menu").css("top",-totalHeight)})});$(document).on("click",function(e){if(!$(e.target).closest(".site-header .ast-mega-menu-enabled > .menu-item-has-children .astra-megamenu").length&&!$(e.target).closest(".site-header .site-navigation > .main-navigation > .main-header-menu > .menu-item").length){$(".site-header .site-navigation > .main-navigation > .main-header-menu > .menu-item").removeClass("has-megamenu");$(".has-active-state-default").addClass("is-active")}});$(document).ready(function(){if($(window).width()<767){$(".footer-collapse").click(function(){$(this).parents(".footer-section").find(".footer-collapsible").slideToggle("slow",function(){$(this).parents(".footer-section").toggleClass("footer-section-active")})})}});$("#category-toggle").on("click",function(){$("#category-list").toggleClass("show")});window.addEventListener("message",(event)=>{if(event.data.type==="hsFormCallback"&&event.data.eventName==="onFormReady"){$(".site-content .input").each(function(){$(this).find("select").select2({minimumResultsForSearch:-1,})});const $attachmentContainer=$(".single-post-form.careers-form .hs-attachment");if($attachmentContainer.find('.hs-file-hint').length===0){$attachmentContainer.append('<div class="hs-file-hint">Accepts .pdf, .doc, .docx, .txt and .rtf</div>')}
const $inputFileContainer=$attachmentContainer.find('.input');$inputFileContainer.find('input[type="file"]').attr("accept",".pdf, .doc, .docx, .txt, .rtf");if($inputFileContainer.find('.hs-file-text').length===0){$inputFileContainer.append('<div class="hs-file-text">Drop item here or <span>Browse Files</span>.</div>')}
$inputFileContainer.find('input[type="file"]').on("change",function(){const fileName=$(this).val().split("\\").pop();$(".hs-file-text").text(fileName);if(!$inputFileContainer.find(".remove-file").length){$inputFileContainer.append('<span class="hs-remove-file">Remove</span>')}
$inputFileContainer.addClass("has-uploaded-file")});$(document).on("click",".hs-remove-file",function(){$inputFileContainer.find('input[type="file"]').val("");$(".hs-file-text").html("Drop item here or <span>Browse Files</span>.");$(this).remove();$inputFileContainer.removeClass("has-uploaded-file")})}})});jQuery(document).ready(function($){var $window=$(window);var $items=$(".timeline-item");var $line=$(".timeline-line");var $lineInner=$(".timeline-line-inner");var $firstDot=$(".timeline-dot").first();var $lastDot=$(".timeline-dot").last();if($items.length===0||$line.length===0||$lineInner.length===0||$firstDot.length===0||$lastDot.length===0){return}
function updateTimeline(){var windowTop=$window.scrollTop();var windowHeight=$window.height();var containerTop=$(".timeline-container").offset().top;var containerBottom=containerTop+$(".timeline-container").height();var x=windowHeight/2;$items.each(function(){var $item=$(this);var itemTop=$item.offset().top;var itemBottom=itemTop+$item.outerHeight();if(windowTop+windowHeight>itemTop&&windowTop<itemBottom){$item.addClass("in-view").removeClass("out-of-view")}else{$item.removeClass("in-view").addClass("out-of-view")}});var firstMarkerTop=$firstDot.offset().top-containerTop;var lastMarkerTop=$lastDot.offset().top-containerTop+18;var maxHeight=lastMarkerTop;var timelineInnerHeight;if(windowTop+x<containerTop){timelineInnerHeight=0}else if(windowTop+x>containerTop+maxHeight){timelineInnerHeight=maxHeight}else{timelineInnerHeight=Math.min(windowTop+x-containerTop,maxHeight)}
$line.height(maxHeight);$lineInner.height(timelineInnerHeight)}
$window.on("scroll",updateTimeline);$window.on("resize",updateTimeline);updateTimeline()});document.addEventListener("DOMContentLoaded",function(){const tabButtons=document.querySelectorAll(".tab-button");const tabContents=document.querySelectorAll(".tab-content");tabButtons.forEach((button)=>{button.addEventListener("click",()=>{const tab=button.getAttribute("data-tab");tabButtons.forEach((btn)=>btn.classList.remove("active"));tabContents.forEach((content)=>content.classList.remove("active"));button.classList.add("active");document.getElementById(tab).classList.add("active")})})});document.addEventListener("DOMContentLoaded",function(){const tabButtons=document.querySelectorAll(".programme-all-tabs li");const tabContents=document.querySelectorAll(".programme-tab-content .program-tab");const specificText="Horizon Europe";tabButtons.forEach(function(item){const frameworkElement=item.querySelector(".frameworks-name");if(frameworkElement&&frameworkElement.textContent.trim()===specificText){item.classList.add("active");const tabClass=item.classList[0];document.querySelector(`.programme-tab-content .${tabClass}`).classList.add("active-content")}});tabButtons.forEach((button)=>{button.addEventListener("click",function(e){e.preventDefault();const tabClass=button.classList[0];tabButtons.forEach((btn)=>btn.classList.remove("active"));tabContents.forEach((content)=>content.classList.remove("active-content"));button.classList.add("active");document.querySelector(`.programme-tab-content .${tabClass}`).classList.add("active-content")})})});document.addEventListener("DOMContentLoaded",function(){function setTargetSection(sectionId){localStorage.setItem("targetSection",sectionId)}
const targetSection=localStorage.getItem("targetSection");if(targetSection){const el=document.getElementById(targetSection);if(el){const offsetTop=el.offsetTop-100;document.querySelector('[data-tab="projects-tab"]').click();window.scrollTo({top:offsetTop,behavior:"smooth",})}
localStorage.removeItem("targetSection")}
document.querySelectorAll("body.tax-resourcescat .pagination a").forEach(function(link){link.addEventListener("click",function(event){setTargetSection("projects-timeline-scroll-to")})})});function toggleDropdown(){var dropdownMenu=document.getElementById("dropdownMenu");dropdownMenu.style.display=dropdownMenu.style.display==="flex"?"none":"flex"}
document.addEventListener("click",function(event){var dropdownMenu=document.getElementById("dropdownMenu");var dropdownToggle=document.querySelector(".dropdown-toggle");if(dropdownToggle!==null){if(!dropdownToggle.contains(event.target)&&!dropdownMenu.contains(event.target)){dropdownMenu.style.display="none"}}});document.addEventListener("DOMContentLoaded",()=>{const MOBILE_BREAKPOINT=1024;const tabComponents=document.querySelectorAll(".custom-tabs-component, .custom-tabs-dropdown-component");tabComponents.forEach((component)=>{const tabButtons=component.querySelectorAll(".custom-tab");const dropdown=component.querySelector(".custom-dropdown");const dropdownSelected=component.querySelector(".custom-dropdown-selected");const dropdownOptions=component.querySelectorAll(".custom-dropdown-option");const tabContents=component.querySelectorAll(".custom-tab-content");function activateTab(tabName,updateUrl=!1,collapse=!1){tabButtons.forEach((btn)=>btn.classList.remove("active"));dropdownOptions.forEach((option)=>option.classList.remove("active"));tabContents.forEach((content)=>content.classList.remove("active"));if(collapse){if(updateUrl){history.replaceState(null,"",window.location.pathname)}
return}
const btn=Array.from(tabButtons).find((btn)=>btn.dataset.tab===tabName);const dropdownOption=Array.from(dropdownOptions).find((option)=>option.dataset.tab===tabName);const content=component.querySelector(`#${tabName}`);if(btn){btn.classList.add("active")}
if(dropdownOption){dropdownOption.classList.add("active");dropdownSelected.textContent=dropdownOption.textContent}
if(content){content.classList.add("active");if(window.innerWidth<=MOBILE_BREAKPOINT&&component.classList.contains("custom-tabs-component")){btn.insertAdjacentElement("afterend",content)}}
if(updateUrl){history.replaceState(null,"",`?p=${tabName}`)}}
const initialTab=new URLSearchParams(window.location.search).get("p");const tabNames=Array.from(tabButtons).map((btn)=>btn.dataset.tab);const defaultTab=tabNames.includes(initialTab)?initialTab:tabButtons[0].dataset.tab;activateTab(defaultTab,!1,!1);tabButtons.forEach((btn)=>{btn.addEventListener("click",()=>{const tabName=btn.dataset.tab;const isActive=btn.classList.contains("active");const isAccordion=window.innerWidth<=MOBILE_BREAKPOINT;if(isAccordion&&isActive&&component.classList.contains("custom-tabs-component")){activateTab(tabName,!0,!0)}else{activateTab(tabName,!0,!1)}})});if(dropdown){dropdownSelected.addEventListener("click",()=>{dropdown.classList.toggle("active")});dropdownOptions.forEach((option)=>{option.addEventListener("click",()=>{const tabName=option.dataset.tab;activateTab(tabName,!0);dropdown.classList.remove("active")})})}
function handleResize(){const isMobile=window.innerWidth<=MOBILE_BREAKPOINT;if(component.classList.contains("custom-tabs-dropdown-component")){if(isMobile){dropdown.style.display="block";component.querySelector(".custom-tabs").style.display="none"}else{dropdown.style.display="none";component.querySelector(".custom-tabs").style.display="flex"}
const activeTab=component.querySelector(".custom-tab.active");if(isMobile&&activeTab){const activeOption=Array.from(dropdownOptions).find((option)=>option.dataset.tab===activeTab.dataset.tab);if(activeOption){dropdownSelected.textContent=activeOption.textContent}}}
if(component.classList.contains("custom-tabs-component")){component.classList.toggle("accordion",isMobile);const activeTab=component.querySelector(".custom-tab.active");if(activeTab){activateTab(activeTab.dataset.tab,!1,!1)}}}
handleResize();window.addEventListener("resize",handleResize)})});const links=document.querySelectorAll(".details a, .single-post-content a, a.cta_button");links.forEach((link)=>{if(!link.classList.contains("same-window")){link.setAttribute("target","_blank")}});jQuery(document).ready(function($){$("#projects-filter-form").on("submit",function(e){e.preventDefault();var filters=$(this).serialize();console.log(filters);$.ajax({url:customFilterData.ajaxurl,type:"GET",data:{action:"filter_projects",filters:filters,},beforeSend:function(){$("#projects-results").html("<p>Loading projects...</p>")},success:function(response){$("#projects-results").html(response);$(".tab-button").removeClass("active");$('[data-tab="projects-tab"]').addClass("active");$(".tab-content").removeClass("active");$("#projects-tab").addClass("active")},error:function(){$("#projects-results").html("<p>Error loading projects. Please try again.</p>")},})});$(document).on("click",".js-research-pagination a",function(e){e.preventDefault();var paged=$(this).attr("data-page");var filters=$("#projects-filter-form").serialize();$.ajax({url:customFilterData.ajaxurl,type:"GET",data:{action:"filter_projects",filters:filters,paged:paged,},beforeSend:function(){$("#projects-results").html("<p>Loading projects...</p>")},success:function(response){$("#projects-results").html(response);$(".tab-button").removeClass("active");$('[data-tab="projects-tab"]').addClass("active");$(".tab-content").removeClass("active");$("#projects-tab").addClass("active")},error:function(){$("#projects-results").html("<p>Error loading projects. Please try again.</p>")},})});function updateChartBars(){$(".chart-bars > li").each(function(){const $this=$(this);const startMonth=$this.data("start-month");const endMonth=$this.data("end-month");const duration=$this.data("duration");const[startYear,endYear]=duration.split("-");const $startYearElement=$this.closest(".chart-wrapper").find(".chart-values li").filter(function(){return $(this).text().includes(startYear)});if($startYearElement.length){const startYearOffsetLeft=$startYearElement[0].offsetLeft;const $startMonthElement=$startYearElement.find(`.chart-months li[data-month="${startMonth}"]`);if($startMonthElement.length){const startMonthOffsetLeft=$startMonthElement[0].offsetLeft;const startOffset=startYearOffsetLeft+startMonthOffsetLeft;const $endYearElement=$this.closest(".chart-wrapper").find(".chart-values li").filter(function(){return $(this).text().includes(endYear)});if($endYearElement.length){const endYearOffsetLeft=$endYearElement[0].offsetLeft;const $endMonthElement=$endYearElement.find(`.chart-months li[data-month="${endMonth}"]`);if($endMonthElement.length){const widthOfMonth=$endMonthElement.outerWidth();const endMonthOffsetLeft=$endMonthElement[0].offsetLeft+widthOfMonth;const endOffset=endYearOffsetLeft+endMonthOffsetLeft;const width=endOffset-startOffset;$this.css({left:startOffset+"px",width:width+"px",})}}}}})}
updateChartBars();$(window).on("resize",function(){updateChartBars()});function checkElementsOutOfBox(elements,container){const containerRect=container.getBoundingClientRect();elements.forEach((element)=>{const elementRect=element.getBoundingClientRect();const isOutOfBox=elementRect.top<containerRect.top||elementRect.left<containerRect.left||elementRect.bottom>containerRect.bottom||elementRect.right>containerRect.right;if(isOutOfBox){element.classList.add("is-out")}else{element.classList.remove("is-out")}})}
function initializeElementCheck(){const containers=document.querySelectorAll(".chart-bars");containers.forEach((container)=>{const elements=container.querySelectorAll(".program-tooltip");checkElementsOutOfBox(elements,container)})}
window.addEventListener("load",initializeElementCheck);window.addEventListener("resize",initializeElementCheck);const activeTabTextFrameworks=$(".programme-all-tabs li.active .frameworks-name").text();const activeTabTextProgramYears=$(".programme-all-tabs li.active .program-years").text();const activeTabText=`${activeTabTextFrameworks} | ${activeTabTextProgramYears}`;$(".programme-nav-mobile-label").text(activeTabText);$(".programme-nav-mobile-label").on("click",function(){$(this).parent().toggleClass("has-active-dropdown")});$(".programme-all-tabs li").on("click",function(){const activeTabTextFrameworks=$(this).find(".frameworks-name").text();const activeTabTextProgramYears=$(this).find(".program-years").text();const activeTabText=`${activeTabTextFrameworks} | ${activeTabTextProgramYears}`;$(".programme-nav-mobile-label").text(activeTabText);$(".programme-nav").removeClass("has-active-dropdown")})});const placeholder=document.querySelector('.hero-lottie-animation-placeholder');const lottie=document.querySelector('.hero-lottie-animation')
if(placeholder&&lottie){lottie.addEventListener('load',()=>{placeholder.style.opacity='0'})}